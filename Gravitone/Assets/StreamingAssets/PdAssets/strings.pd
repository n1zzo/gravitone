#N canvas 464 340 942 639 10;
#X obj 88 191 loadbang;
#X msg 83 221 0.995;
#X msg 126 221 5700;
#X obj 53 315 s \$0-width_ctrl;
#X obj 83 291 s \$0-decay_ctrl;
#X obj 126 270 s \$0-cutoff_ctrl;
#X msg 53 221 8;
#X obj 159 247 s \$0-strum_speed_ctrl;
#X msg 166 222 8;
#X obj 331 240 hsl 128 15 0 127 0 0 empty noteIn empty -2 -8 0 10 -262144
-1 -1 6700 1;
#X obj 535 273 s \$0-width;
#X obj 578 252 s \$0-decay;
#X obj 619 232 s \$0-cutoff;
#X obj 649 136 hsl 180 15 1 40 0 0 empty \$0-width_ctrl width -2 -8
1 10 -262144 -1 -1 3213 1;
#X obj 647 169 hsl 180 15 0.9 0.999 0 0 empty \$0-decay_ctrl decay
-2 -8 1 10 -262144 -1 -1 17177 1;
#X obj 647 199 hsl 180 15 100 8000 0 0 empty \$0-cutoff_ctrl cutoff
-2 -8 1 10 -262144 -1 -1 12689 1;
#X text 67 160 Initial values;
#X text 631 97 Width Decay and Cutoff sliders;
#X text 339 210 Input MIDI note;
#X obj 317 440 dac~;
#N canvas 0 92 638 458 karpluck~ 0;
#X obj 66 67 inlet midi_note;
#X obj 148 155 inlet width;
#X obj 181 241 inlet decay;
#X obj 260 242 inlet cutoff;
#X obj 67 351 outlet~;
#N canvas 353 578 194 221 excitation~ 0;
#X obj 31 18 inlet midi_note;
#X obj 101 39 inlet width;
#X obj 30 120 vline~;
#X obj 100 123 noise~;
#X obj 30 154 *~;
#X obj 30 181 outlet~;
#X obj 30 44 bang;
#X obj 74 69 del 5;
#X msg 30 87 1 1;
#X msg 74 90 0 1;
#X connect 0 0 6 0;
#X connect 1 0 7 1;
#X connect 2 0 4 0;
#X connect 3 0 4 1;
#X connect 4 0 5 0;
#X connect 6 0 8 0;
#X connect 6 0 7 0;
#X connect 7 0 9 0;
#X connect 8 0 2 0;
#X connect 9 0 2 0;
#X restore 67 179 pd excitation~;
#N canvas 97 389 669 524 body~ 0;
#X obj 75 232 inlet~;
#X obj 221 274 outlet~;
#X obj 376 -12 block~ 1;
#X obj 75 270 delwrite~ \$0-dl 1000;
#X obj 99 131 delread~ \$0-dl 12;
#X obj 221 179 lop~ 4000;
#X obj 221 226 *~ 0.99;
#X obj 99 -22 mtof;
#X obj 99 8 t b f;
#X obj 99 69 /;
#X msg 92 43 1;
#X obj 99 99 * 1000;
#X obj 99 -55 inlet midi_note;
#X obj 260 202 inlet decay;
#X obj 272 154 inlet cutoff;
#X text 375 -55 Block size needs to be 1 sample for this subpatch to
ensure correct tuning and operation for delay line feedback;
#X text 151 70 Convert a midi note into the required delay line length
(in ms) to generate said pitch.;
#X connect 0 0 3 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 6 0 1 0;
#X connect 6 0 3 0;
#X connect 7 0 8 0;
#X connect 8 0 10 0;
#X connect 8 1 9 1;
#X connect 9 0 11 0;
#X connect 10 0 9 0;
#X connect 11 0 4 0;
#X connect 12 0 7 0;
#X connect 13 0 6 1;
#X connect 14 0 5 1;
#X restore 67 301 pd body~;
#X obj 66 91 s \$0-midi_note;
#X obj 67 136 r \$0-midi_note;
#X obj 82 227 r \$0-midi_note;
#X text 159 177 excitation generates a short noise burst the specied
width;
#X text 126 301 body filters the excitation noise in a pitch specific
delay line;
#X connect 0 0 7 0;
#X connect 1 0 5 1;
#X connect 2 0 6 2;
#X connect 3 0 6 3;
#X connect 5 0 6 0;
#X connect 6 0 4 0;
#X connect 8 0 5 0;
#X connect 9 0 6 1;
#X restore 328 399 pd karpluck~;
#X obj 422 297 r \$0-width;
#X obj 504 299 r \$0-decay;
#X obj 584 304 r \$0-cutoff;
#X obj 328 142 notein;
#X obj 328 168 stripnote;
#X connect 0 0 6 0;
#X connect 0 0 1 0;
#X connect 0 0 2 0;
#X connect 0 0 8 0;
#X connect 1 0 4 0;
#X connect 2 0 5 0;
#X connect 6 0 3 0;
#X connect 8 0 7 0;
#X connect 9 0 20 0;
#X connect 13 0 10 0;
#X connect 14 0 11 0;
#X connect 15 0 12 0;
#X connect 20 0 19 0;
#X connect 20 0 19 1;
#X connect 21 0 20 1;
#X connect 22 0 20 2;
#X connect 23 0 20 3;
#X connect 24 0 25 0;
#X connect 24 1 25 1;
#X connect 25 0 9 0;
